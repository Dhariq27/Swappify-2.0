<workflow name="Deploy React + Vite to GitHub Pages">
  <trigger>
    <push>
      <branches>
        <branch>main</branch>
      </branches>
    </push>
  </trigger>

  <jobs>
    <job id="build-and-deploy" runs-on="ubuntu-latest">
      <steps>
        <step uses="actions/checkout@v3" />

        <step name="Setup Node">
          <uses>actions/setup-node@v3</uses>
          <with>
            <node-version>20</node-version>
          </with>
        </step>

        <step name="Install dependencies">
          <run>npm ci</run>
        </step>

        <step name="Build the project">
          <run>npm run build</run>
        </step>

        <step name="Deploy">
          <uses>peaceiris/actions-gh-pages@v3</uses>
          <with>
            <github_token>${{ secrets.GITHUB_TOKEN }}</github_token>
            <publish_dir>./dist</publish_dir>
            <keep_files>false</keep_files>
          </with>
        </step>
      </steps>
    </job>
  </jobs>
</workflow>
